/****************************************************************************
 * PROJECT     : V.I.P. Library
 * MODULE NAME : vip/pyramid.h        * TYPE     : Header
 * AUTHOR      : MANGIN J.-F.         * CREATION : 18/06/1996
 * VERSION     : 0.1                  * REVISION :
 * LANGUAGE    : C++                  * EXAMPLE  :
 * DEVICE      : Sun SPARC Station 5
 ****************************************************************************
 *
 * DESCRIPTION : Calul de la pyramide
 *
 ****************************************************************************
 *
 * USED MODULES : vip/volume.h
 *
 ****************************************************************************
 * REVISIONS :  DATE  |    AUTHOR    |       DESCRIPTION
 *--------------------|--------------|---------------------------------------
 *              / /   |              |
 ****************************************************************************/

#ifndef VIP_PYRAMID_H
#define VIP_PYRAMID_H

#ifdef __cplusplus
  extern "C" {
#endif

#include <vip/volume.h>

#define PYR_MEAN   10
#define PYR_MEDIAN 11
#define PYR_MAX 12

typedef struct pyramid_volume
{ 
  Volume *volume;
  int nx;
  int ny;
  int nz;
  int rx;
  int ry;
  int rz;
  int winsize;
} PyramidVolume;

typedef struct pyramid
{ 
  int NbLevel;
  PyramidVolume **image;
} Pyramid;

/*---------------------------------------------------------------------------*/
extern Pyramid *VipPutVolumeInPyramidAndCreatePyramid(Volume *vol, 
						int NbLevel, int type);
/*---------------------------------------------------------------------------*/


/*---------------------------------------------------------------------------*/
extern PyramidVolume *VipCreateEmptyPyramidVolume(
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern PyramidVolume *VipCreatePyramidVolumeLikePyramid(
  PyramidVolume *pyr
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern PyramidVolume *VipCreateVoidPyramidVolumeLikePyramid(
  PyramidVolume *pyr
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern int VipAllocateDataSpacePyramidVolume(
  PyramidVolume *pyr
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern PyramidVolume *VipConvertVolumeToPyramidVolume(
  Volume *vol
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Vip_S16BIT VipGetPyramidMean(
  Vip_S16BIT medtab[], 
  int nb
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Vip_S16BIT VipGetPyramidMedian(
  Vip_S16BIT medtab[], 
  int nb
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Vip_S16BIT VipGetPyramidMax(
  Vip_S16BIT medtab[], 
  int nb
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern PyramidVolume *VipGetUpLevelPyramidVolume(
  PyramidVolume *down, 
  int type
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern PyramidVolume *VipGetDownLevelPyramidVolume(
  PyramidVolume *up
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Volume *VipCreateEmptyVolume(
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Volume *VipConvertPyramidVolumeToVolume(
  PyramidVolume *pyr
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern int VipAllocateDataSpacePyramid(
  Pyramid *pyr, 
  int nb_level
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Pyramid *VipCreateEmptyPyramid(
  int NbLevel
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Pyramid *VipGetPyramid(
  Volume *vol, 
  int nlevel, 
  int type
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern void VipCopyPyramidImageInfoStructure(
  Pyramid *pyr, 
  Pyramid *pyrlab,
  int      n
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern void VipFreePyramid(
  Pyramid *pyr
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern int VipConstructPyramid(
  Pyramid *pyr,
  int      type
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Pyramid *VipReadVolumeInPyramid(
  char *name,
  int   borderWidth,
  int   NbLevel
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Pyramid *VipReadTopLevelVolumeInPyramid(
  char *name,
  int   borderWidth,
  int   NbLevel
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern Pyramid *VipReadVolumeInPyramidAndCreatePyramid(
  char *name,
  int   border,
  int   NbLevel,
  int   type
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern int VipWritePyramidImageVolume(
  char    *name,
  Pyramid *pyr,
  int      level
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern int VipWritePyramidLabelVolume(
  char    *name,
  Pyramid *pyr,
  int      level
);
/*---------------------------------------------------------------------------*/

/*---------------------------------------------------------------------------*/
extern int VipWritePyramidVolumes(
  char    *name,
  Pyramid *pyr
);
/*---------------------------------------------------------------------------*/

#ifdef __cplusplus
  }
#endif

#endif
